{
  "audit_date": "2026-02-19",
  "site": "yalla-london",
  "audit_type": "static_code_analysis",
  "summary": {
    "pages_with_schema": 11,
    "pages_without_schema": 17,
    "schema_types_in_use": ["Organization", "WebSite", "Article", "NewsArticle", "BreadcrumbList", "CollectionPage", "ItemList", "WebPage"],
    "schema_types_available_but_unused": ["Event", "Restaurant", "Place", "TouristAttraction", "Review", "FAQPage (deprecated)"],
    "deprecated_schemas_present": ["FAQPage (deprecated Aug 2023, still in structured-data.tsx)"],
    "schema_injection_methods": [
      "Root layout: StructuredData component (Organization + WebSite on every page)",
      "Per-page: inline generateStructuredData() functions with JSON-LD script tags",
      "lib/seo/schema-generator.ts: Advanced generator (not used by most pages, used by enhanced-schema API route)"
    ],
    "multi_site_readiness": "PARTIAL -- blog/[slug] uses dynamic siteName/siteDomain from config. News/[slug] and StructuredData component hardcode 'Yalla London'."
  },
  "schema_by_page_type": {
    "root_layout": {
      "path": "app/layout.tsx",
      "component": "StructuredData (components/structured-data.tsx)",
      "schemas": [
        {
          "type": "Organization",
          "fields": ["name", "url", "logo", "description", "address (PostalAddress)", "contactPoint", "sameAs"],
          "source": "brandConfig",
          "multi_site": false,
          "issues": [
            "Logo path hardcoded to /images/yalla-london-logo.svg",
            "Fallback URL hardcoded to https://yalla-london.com",
            "brandConfig is Yalla London specific (not per-site)"
          ]
        },
        {
          "type": "WebSite",
          "fields": ["name", "url", "description", "inLanguage", "publisher"],
          "source": "brandConfig",
          "multi_site": false,
          "issues": [
            "Publisher logo hardcoded to /images/yalla-london-logo.svg",
            "No SearchAction (correct -- no site search exists)"
          ]
        }
      ],
      "note": "These schemas are injected on EVERY page via the root layout head."
    },
    "blog_detail": {
      "path": "app/blog/[slug]/page.tsx",
      "schemas": [
        {
          "type": "Article",
          "fields": ["headline", "description", "image", "datePublished", "dateModified", "author (Organization)", "publisher (Organization)", "mainEntityOfPage", "articleSection", "keywords", "wordCount", "inLanguage"],
          "source": "DB or static blog post data",
          "multi_site": true,
          "note": "Uses dynamic siteName, siteDomain, siteSlug from site config. Logo path derived from siteSlug.",
          "issues": [
            "Author type is Organization, not Person -- weaker E-E-A-T signal",
            "No dateCreated field",
            "inLanguage hardcoded to 'en-GB' even for Arabic content"
          ]
        },
        {
          "type": "BreadcrumbList",
          "fields": ["itemListElement (Home > Blog > Post Title)"],
          "multi_site": true,
          "note": "Uses dynamic baseUrl"
        }
      ]
    },
    "blog_listing": {
      "path": "app/blog/page.tsx",
      "schemas": [
        {
          "type": "CollectionPage",
          "fields": ["name", "description", "url", "isPartOf (WebSite)", "mainEntity (ItemList)"],
          "source": "Dynamic from site config + all posts",
          "multi_site": true,
          "note": "Uses siteName and baseUrl dynamically"
        },
        {
          "type": "ItemList",
          "fields": ["itemListElement (ListItem for each post with name, url, image, datePublished, author)"],
          "source": "All published posts (static + DB)",
          "multi_site": true
        }
      ]
    },
    "blog_category": {
      "path": "app/blog/category/[slug]/page.tsx",
      "schemas": [
        {
          "type": "CollectionPage",
          "fields": ["name", "description", "url", "isPartOf (WebSite)", "mainEntity (ItemList)"],
          "multi_site": false,
          "issues": [
            "Publisher name hardcoded to 'Yalla London'",
            "isPartOf name hardcoded to 'Yalla London Blog'",
            "CollectionPage is valid but ItemList without CollectionPage wrapper is more common for category pages"
          ]
        },
        {
          "type": "BreadcrumbList",
          "fields": ["itemListElement (Home > Blog > Category)"],
          "multi_site": false,
          "issues": ["Uses hardcoded siteName"]
        }
      ]
    },
    "news_detail": {
      "path": "app/news/[slug]/page.tsx",
      "schemas": [
        {
          "type": "NewsArticle",
          "fields": ["headline", "description", "image", "datePublished", "author (Organization -- source org)", "publisher (Organization)", "mainEntityOfPage", "articleSection", "keywords", "inLanguage"],
          "source": "DB NewsItem or seed data",
          "multi_site": false,
          "issues": [
            "Publisher name hardcoded to 'Yalla London' (line 346)",
            "Publisher logo hardcoded to /images/yalla-london-logo.svg (line 350)",
            "Author is the news source organization (correct for curated news)"
          ]
        },
        {
          "type": "BreadcrumbList",
          "fields": ["itemListElement (Home > News > Article)"],
          "multi_site": false,
          "issues": ["baseUrl uses getDefaultSiteId() which resolves to yalla-london"]
        }
      ]
    },
    "news_listing": {
      "path": "app/news/page.tsx",
      "schemas": [
        {
          "type": "CollectionPage",
          "fields": ["name", "description", "url", "publisher"],
          "multi_site": false,
          "note": "Includes nested ItemList with news items"
        },
        {
          "type": "ItemList",
          "fields": ["itemListElement (ListItem for each news item)"],
          "source": "DB NewsItem or seed data"
        }
      ]
    },
    "information_hub_landing": {
      "path": "app/information/page.tsx",
      "schemas": [
        {
          "type": "WebPage",
          "fields": ["name", "description", "url", "isPartOf (WebSite)"],
          "multi_site": false
        },
        {
          "type": "CollectionPage",
          "fields": ["name", "description", "mainEntity (ItemList of sections)"]
        },
        {
          "type": "BreadcrumbList",
          "fields": ["itemListElement (Home > Information)"]
        }
      ]
    },
    "information_section": {
      "path": "app/information/[section]/page.tsx",
      "schemas": [
        {
          "type": "WebPage",
          "fields": ["name", "description", "url", "isPartOf"]
        },
        {
          "type": "CollectionPage",
          "fields": ["name", "description", "mainEntity (ItemList of articles in section)"]
        },
        {
          "type": "BreadcrumbList",
          "fields": ["itemListElement (Home > Information > Section)"],
          "note": "Conditional -- only rendered if breadcrumb data exists"
        }
      ]
    },
    "information_articles_listing": {
      "path": "app/information/articles/page.tsx",
      "schemas": [
        {
          "type": "CollectionPage",
          "fields": ["name", "description", "url"]
        },
        {
          "type": "ItemList",
          "fields": ["itemListElement (ListItem for each article)"]
        }
      ]
    },
    "information_article_detail": {
      "path": "app/information/articles/[slug]/page.tsx",
      "schemas": [
        {
          "type": "Article",
          "fields": ["headline", "description", "author", "publisher", "datePublished", "dateModified", "mainEntityOfPage", "articleSection", "keywords", "wordCount", "inLanguage"]
        },
        {
          "type": "BreadcrumbList",
          "fields": ["itemListElement (Home > Information > Articles > Article)"]
        },
        {
          "type": "WebPage",
          "fields": ["Conditional based on article data"],
          "note": "Some articles include additional WebPage schema"
        }
      ]
    },
    "homepage": {
      "path": "app/page.tsx",
      "schemas": [],
      "inherits": "Root layout Organization + WebSite only",
      "missing": ["WebPage schema with mainEntity", "No SiteNavigationElement", "No specific homepage schema"],
      "recommendation": "Add WebPage schema with description of site purpose"
    },
    "about_page": {
      "path": "app/about/page.tsx",
      "schemas": [],
      "inherits": "Root layout Organization + WebSite only",
      "missing": ["AboutPage schema", "No Person schema for founder/team"],
      "recommendation": "Add AboutPage schema type"
    },
    "contact_page": {
      "path": "app/contact/page.tsx",
      "schemas": [],
      "inherits": "Root layout Organization + WebSite only",
      "missing": ["ContactPage schema"],
      "recommendation": "Add ContactPage schema with contactPoint details"
    },
    "events_listing": {
      "path": "app/events/page.tsx",
      "schemas": [],
      "inherits": "Root layout Organization + WebSite only",
      "missing": ["ItemList of Event schemas", "No Event schema despite StructuredData component having Event support"],
      "recommendation": "Add ItemList with Event sub-items. Use the existing getEnhancedEventStructuredData() from structured-data.tsx"
    },
    "experiences_page": {
      "path": "app/experiences/page.tsx",
      "schemas": [],
      "inherits": "Root layout Organization + WebSite only",
      "missing": ["ItemList or CollectionPage for experiences"],
      "recommendation": "Add ItemList schema for experience listings"
    },
    "hotels_page": {
      "path": "app/hotels/page.tsx",
      "schemas": [],
      "inherits": "Root layout Organization + WebSite only",
      "missing": ["ItemList of Hotel/LodgingBusiness schemas"],
      "recommendation": "Add ItemList with Hotel sub-items for rich results"
    },
    "shop_pages": {
      "path": "app/shop/*.tsx",
      "schemas": [],
      "inherits": "Root layout Organization + WebSite only",
      "missing": ["Product schema on shop/[slug]", "ItemList on shop listing"],
      "recommendation": "Add Product schema with offers, pricing, availability"
    },
    "london_by_foot": {
      "path": "app/london-by-foot/*.tsx",
      "schemas": [],
      "inherits": "Root layout Organization + WebSite only",
      "missing": ["TouristAttraction or TouristTrip schema", "No Place schema despite component support"],
      "recommendation": "Add TouristTrip or Route schema with Place sub-items for walking routes"
    }
  },
  "structured_data_component_analysis": {
    "file": "components/structured-data.tsx",
    "supported_types": ["website", "article", "event", "restaurant", "organization", "place", "review", "faq", "breadcrumb"],
    "schema_generators": {
      "getBaseStructuredData": "Organization + WebSite (used on every page)",
      "getEventStructuredData": "Basic Event schema",
      "getEnhancedEventStructuredData": "Extended Event with geo, offers, performers, organizer",
      "getArticleStructuredData": "Basic Article (HARDCODES 'Yalla London')",
      "getEnhancedArticleStructuredData": "Extended Article with wordCount, articleBody, topics",
      "getRestaurantStructuredData": "Restaurant with address, rating, cuisine",
      "getPlaceStructuredData": "TouristAttraction with geo, hours, amenities, rating",
      "getReviewStructuredData": "Review with rating, author, itemReviewed",
      "getFAQStructuredData": "FAQPage -- DEPRECATED by Google Aug 2023",
      "getBreadcrumbStructuredData": "BreadcrumbList"
    },
    "issues": [
      {
        "id": "SC-COMP-001",
        "severity": "CRITICAL",
        "title": "FAQPage schema still generated",
        "detail": "getFAQStructuredData() (lines 189-200) generates FAQPage type. Google deprecated FAQPage in Aug 2023 and restricted it to authoritative health/government sites only. standards.ts correctly marks it as deprecated, but this component still generates it and exposes it via type='faq' prop.",
        "fix": "Remove getFAQStructuredData entirely. Remove 'faq' from the type union. Use Article or WebPage for FAQ-style content."
      },
      {
        "id": "SC-COMP-002",
        "severity": "HIGH",
        "title": "Multiple hardcoded 'Yalla London' references",
        "detail": "getArticleStructuredData() hardcodes 'Yalla London' as author.name (line 88) and publisher.name (line 92). Publisher logo uses hardcoded Pinterest image URL (line 95). getEnhancedArticleStructuredData uses brandConfig.seo.author which resolves to Yalla London-specific value.",
        "fix": "Accept siteConfig as parameter. Use dynamic site name and logo."
      },
      {
        "id": "SC-COMP-003",
        "severity": "HIGH",
        "title": "Logo URL hardcoded",
        "detail": "Organization logo hardcoded to /images/yalla-london-logo.svg (lines 20, 51). Article publisher logo uses external Pinterest image URL (line 95) instead of site logo.",
        "fix": "Use dynamic logo path from site config. Remove external Pinterest URL."
      },
      {
        "id": "SC-COMP-004",
        "severity": "MEDIUM",
        "title": "Base URL fallback",
        "detail": "getBaseStructuredData() falls back to 'https://yalla-london.com' (line 13) when NEXT_PUBLIC_SITE_URL is not set and running server-side.",
        "fix": "Use getBaseUrl() utility or accept baseUrl as parameter"
      },
      {
        "id": "SC-COMP-005",
        "severity": "LOW",
        "title": "No @id for entity linking",
        "detail": "Organization and WebSite schemas lack @id properties. Without @id, schema entities cannot be cross-referenced across pages (e.g., Article publisher @id linking to Organization @id).",
        "fix": "Add @id to Organization (e.g., '{baseUrl}/#organization') and WebSite ('{baseUrl}/#website')"
      }
    ]
  },
  "schema_generator_library_analysis": {
    "file": "lib/seo/schema-generator.ts",
    "status": "Available but underutilized",
    "types_defined": ["PersonSchema", "OrganizationSchema", "ArticleSchema", "EventSchema", "PlaceSchema", "ReviewSchema", "ProductSchema", "OfferSchema", "AggregateRating", "GeoCoordinates", "OpeningHoursSpecification", "PropertyValue", "BreadcrumbList", "FAQPageSchema (deprecated)", "HowToSchema (deprecated)", "VideoObjectSchema", "RecipeSchema"],
    "usage": "Primarily used by /api/seo/enhanced-schema API route and pre-publication gate. Most public pages use inline generateStructuredData() functions instead.",
    "issues": [
      {
        "title": "FAQPage and HowTo type definitions still exist",
        "detail": "Both are deprecated by Google. The generator functions may still be callable.",
        "fix": "Remove deprecated type definitions and generators"
      },
      {
        "title": "Underutilized by public pages",
        "detail": "Most pages implement their own inline schema generation rather than using this centralized library. This leads to inconsistent schema quality and duplicated logic.",
        "recommendation": "Migrate inline generators to use the centralized schema-generator.ts for consistency"
      }
    ]
  },
  "issues": [
    {
      "id": "SCHEMA-001",
      "severity": "CRITICAL",
      "title": "Deprecated FAQPage schema still generatable",
      "detail": "structured-data.tsx still contains FAQPage generator. FAQPage was deprecated by Google in Aug 2023.",
      "fix": "Remove FAQPage generator from structured-data.tsx and schema-generator.ts"
    },
    {
      "id": "SCHEMA-002",
      "severity": "HIGH",
      "title": "Organization/Article author is Organization, not Person",
      "detail": "All article types use Organization as author. Google E-E-A-T guidelines favor Person author with credentials.",
      "impact": "Weaker expertise signals in search results",
      "fix": "Add Person author schema with name, jobTitle, and credentials. Keep Organization as publisher."
    },
    {
      "id": "SCHEMA-003",
      "severity": "HIGH",
      "title": "No schema on 7 public page types",
      "detail": "Homepage, about, contact, events, experiences, hotels, shop, london-by-foot have no page-specific schema beyond inherited Organization + WebSite.",
      "impact": "No rich result eligibility for these pages",
      "fix": "Add appropriate schema: WebPage (homepage), AboutPage (about), ContactPage (contact), ItemList+Event (events), Product (shop), TouristTrip (london-by-foot)"
    },
    {
      "id": "SCHEMA-004",
      "severity": "HIGH",
      "title": "News detail hardcodes 'Yalla London' in publisher",
      "detail": "news/[slug]/page.tsx line 346 hardcodes publisher.name = 'Yalla London' and logo path",
      "fix": "Use dynamic site config from headers"
    },
    {
      "id": "SCHEMA-005",
      "severity": "MEDIUM",
      "title": "No @id entity linking across schemas",
      "detail": "Organization and WebSite schemas lack @id URIs. This prevents knowledge graph entity consolidation.",
      "fix": "Add @id: '{baseUrl}/#organization' to Organization and @id: '{baseUrl}/#website' to WebSite. Reference these in Article publisher and author fields."
    },
    {
      "id": "SCHEMA-006",
      "severity": "MEDIUM",
      "title": "Article inLanguage hardcoded to en-GB",
      "detail": "Blog article schema sets inLanguage: 'en-GB' regardless of whether the user is viewing Arabic content.",
      "fix": "Read locale from headers and set inLanguage accordingly"
    },
    {
      "id": "SCHEMA-007",
      "severity": "MEDIUM",
      "title": "Blog category page schema hardcodes site name",
      "detail": "blog/category/[slug]/page.tsx hardcodes 'Yalla London' in CollectionPage publisher and 'Yalla London Blog' in isPartOf",
      "fix": "Use dynamic site config"
    },
    {
      "id": "SCHEMA-008",
      "severity": "LOW",
      "title": "No Review schema on review-type content",
      "detail": "StructuredData component has Review generator but it is never used on any page. Review-type blog posts (hotel reviews, restaurant reviews) lack Review schema.",
      "recommendation": "Identify review-type articles by category and inject Review schema"
    },
    {
      "id": "SCHEMA-009",
      "severity": "LOW",
      "title": "No Place/TouristAttraction schema on location content",
      "detail": "StructuredData component has Place/TouristAttraction generator. London-by-foot walking routes and experiences pages do not use it.",
      "recommendation": "Add Place schema to location-based content for rich results"
    },
    {
      "id": "SCHEMA-010",
      "severity": "LOW",
      "title": "Duplicate schema generation logic",
      "detail": "Multiple parallel implementations: structured-data.tsx component, per-page inline generators, schema-generator.ts library. This creates maintenance burden and inconsistency risk.",
      "recommendation": "Consolidate to a single schema generation approach. Preferred: use schema-generator.ts as the canonical source, invoked from page-level code."
    }
  ]
}
